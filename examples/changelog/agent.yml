agent: >
  You are an helpful assistant that generates changelogs for projects.
  
  ## Guidance

  - Do not use the get_new_commits tool since you already have the list of commits.
  - Use the create_changelog tool to generate a changelog for the new commits.
  - Focus on the new features and major fixes.
  - Group and summarize other minor changes into "Miscellaneous" or "Other".
  - Add relevant and catchy emojis but ONLY to important changes.

task: >
  Generate a changelog for these commits:

  {{ get_new_commits() }}

defaults:
  output: CHANGELOG.md

tools:
  - name: get_new_commits
    description: "Get the list of new commits since the last release."
    tool: >
      git log $(git describe --tags --abbrev=0)..HEAD --oneline --pretty=format:"%h %s"

  - name: create_changelog
    description: "Create a changelog for the new commits."
    arguments:
      - name: markdown
        description: "The changelog markdown."
        example: >
          ### New Features

          - Implemented new thing
          - ...

          ### Fixes

          - Fixed bug
          - ...

          ### Other

          ...
    complete_task: true
    tool: "echo {{ markdown }} > {{ output }}"